(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{8156:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[name]/introduction",function(){return n(7356)}])},9634:function(e,t,n){"use strict";n.d(t,{b:function(){return h},Z:function(){return b}});var r=n(9669),o=n.n(r),a=n(4051),i=n.n(a);function s(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,o)}var c=function(){var e,t=(e=i().mark((function e(t){var n,a,s,c,u,l,d,p,f,m,x,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,a=t.kinds,e.prev=1,e.next=4,h.get("/photo?name=".concat(n.name,"&kinds=").concat(a));case 4:if(s=e.sent,c=s.data,u=c.preSignedURL,l=c.photoURL,d=c.message,u&&l){e.next=11;break}return e.abrupt("return",{photoURL:l,preSignedURL:u,message:"\uc54c \uc218 \uc5c6\ub294 \uc5d0\ub7ec\uc785\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"});case 11:return e.next=13,o().put(u,n,{headers:{"Content-Type":n.type}});case 13:return e.abrupt("return",{photoURL:l,preSignedURL:u,message:d});case 16:if(e.prev=16,e.t0=e.catch(1),console.error("apiCreatePhoto() >> ",e.t0),i=e.t0,!(null!=(g=r.AxiosError)&&"undefined"!==typeof Symbol&&g[Symbol.hasInstance]?g[Symbol.hasInstance](i):i instanceof g)){e.next=23;break}return f=null===(p=e.t0.response)||void 0===p?void 0:p.data,m=f.preSignedURL,x=f.photoURL,b=f.message,e.abrupt("return",{photoURL:x,preSignedURL:m,message:b});case 23:return e.abrupt("return",{photoURL:null,preSignedURL:null,message:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"});case 24:case"end":return e.stop()}var i,g}),e,null,[[1,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,c,"next",e)}function c(e){s(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),u={apiCreatePhoto:c},l={apiSignUp:function(e){return h.post("/signup",e)}},d={apiGetPosts:function(e){var t=e.lastIdx,n=e.limit,r=e.kinds;return h.get("/posts?lastIdx=".concat(t,"&limit=").concat(n,"&kinds=").concat(r))},apiGetPost:function(e){var t=e.name,n=e.title;return h.get(encodeURI("/post?name=".concat(t,"&title=").concat(n)))},apiDeletePost:function(e){var t=e.postIdx;return h.delete("/post?postIdx=".concat(t))},apiCreateFavorite:function(e){var t=e.postIdx;return h.post("/post/favorite?postIdx=".concat(t))},apiDeleteFavorite:function(e){var t=e.postIdx;return h.delete("/post/favorite?postIdx=".concat(t))},apiCreatePost:function(e){return h.post("/post",e)},apiCreateTemporaryPost:function(e){return h.post("/post/temporary",e)},apiGetPostsByCategory:function(e){var t=e.postIdx,n=e.userIdx;return h.get("/post/category?postIdx=".concat(t,"&userIdx=").concat(n))},apiDeleteTemporaryPost:function(e){var t=e.postIdx;return h.delete("/post/temporary?postIdx=".concat(t))}},p={apiCreateComment:function(e){return h.post("/comment",e)},apiDeleteComment:function(e){var t=e.commentIdx;return h.delete("/comment?commentIdx=".concat(t))}},f={apiCreateReply:function(e){return h.post("/reply",e)},apiDeleteReply:function(e){var t=e.replyIdx;return h.delete("/reply?replyIdx=".concat(t))}},m={apiGetCategories:function(){return h.get("/category")},apiCreateCategory:function(e){return h.post("/category",e)}},x={apiGetUser:function(e){var t=e.name;return h.get(encodeURI("/user?name=".concat(t)))},apiUpdateUser:function(e){return h.patch("/user",e)},apiDeleteUser:function(){return h.delete("/user")}},h=o().create({baseURL:"https://jslog.co.kr/api",withCredentials:!0,timeout:1e4}),b={photoService:u,authService:l,postService:d,commentService:p,replyService:f,categoryService:m,userService:x}},7603:function(e,t,n){"use strict";var r=n(5893),o=n(1163),a=n(1664),i=n(5421),s=n(8915);t.Z=function(e){var t=e.avatar,n=e.name,c=e.introduction,u=(0,o.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"md:mx-auto md:w-3/5 flex items-center space-x-4",children:[(0,r.jsx)(i.Z,{photo:t,className:"w-20 h-20 md:w-28 md:h-28"}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("span",{className:"font-bold text-xl md:text-2xl",children:n}),(0,r.jsx)("p",{className:"whitespace-pre-line text-sm md:text-base",children:c})]})]}),(0,r.jsx)("hr",{className:"md:mx-auto md:w-3/5 my-8"}),(0,r.jsxs)("ul",{className:"md:mx-auto md:w-3/5 flex justify-between mx-auto space-x-2",children:[(0,r.jsx)(a.default,{href:"/".concat(n),children:(0,r.jsx)("a",{className:(0,s.Nn)("flex-1 text-center text-lg font-semibold","/[name]"===u.pathname?"border-b-2 border-indigo-400 text-indigo-400":""),children:"\uae00"})}),(0,r.jsx)(a.default,{href:"/".concat(n,"/category"),children:(0,r.jsx)("a",{className:(0,s.Nn)("flex-1 text-center text-lg font-semibold",u.pathname.includes("/category")?"border-b-2  border-indigo-400 text-indigo-400":""),children:"\uce74\ud14c\uace0\ub9ac"})}),(0,r.jsx)(a.default,{href:"/".concat(n,"/introduction"),children:(0,r.jsx)("a",{className:(0,s.Nn)("flex-1 text-center text-lg font-semibold",u.pathname.includes("/introduction")?"border-b-2  border-indigo-400 text-indigo-400":""),children:"\uc18c\uac1c"})})]})]})}},9243:function(e,t,n){"use strict";var r=n(5893),o=n(7294);t.Z=function(e){var t=e.kinds,n=(0,o.useCallback)((function(e){switch(e){case"button":return(0,r.jsx)("div",{className:"w-6 h-6 mx-auto text-xs border-[5px] border-solid border-white/40 border-t-white rounded-full bg-transparent animate-spin"});case"page":return(0,r.jsx)("aside",{className:"fixed bg-black/60 top-0 left-0 w-full h-full z-20 flex justify-center items-center animate-fade-in",children:(0,r.jsx)("svg",{version:"1.1",id:"layer",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 40 40",xmlSpace:"preserve",fill:"#8A39E1",width:"200px",height:"200px",className:"animate-spin-y mx-auto",children:(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M14.8,5.1L8.8,33C5.8,29.9,4,25.5,4,21C4,13.6,8.5,7.3,14.8,5.1 M20,0C9,0,0,9.4,0,21c0,8.4,4.7,15.5,11.4,19L20,0L20,0z"}),(0,r.jsx)("path",{d:"M25.2,5.1C31.5,7.3,36,13.6,36,21c0,4.5-1.8,8.9-4.8,12L25.2,5.1 M20,0l8.6,40C35.3,36.5,40,29.4,40,21C40,9.4,31,0,20,0L20,0z"})]})})});default:return(0,r.jsx)("div",{className:"w-6 h-6 mx-auto text-xs border-[5px] border-solid border-white/40 border-t-white rounded-full animate-spin bg-transparent"})}}),[]);return(0,r.jsx)(r.Fragment,{children:n(t)})}},7655:function(e,t,n){"use strict";var r=n(5893),o=n(9243),a=n(8915);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.Z=function(e){var t=e.type,n=e.contents,c=e.className,u=e.loading,l=e.loadingText,d=void 0===l?"\ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4...":l,p=s(e,["type","contents","className","loading","loadingText"]);return(0,r.jsx)("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({type:t,className:(0,a.Nn)(c||"",u?"cursor-not-allowed":""),disabled:u},p,{children:u?(0,r.jsxs)("div",{className:"flex space-x-2 justify-center",children:[(0,r.jsx)("span",{children:d}),(0,r.jsx)(o.Z,{kinds:"button"})]}):(0,r.jsx)(r.Fragment,{children:n})}))}},7356:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return m}});var r=n(5893),o=n(7294),a=n(3299),i=n(7536),s=n(9634),c=n(7603),u=n(7655),l=n(782);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=!0;t.default=function(e){var t=e.user,n=(0,a.useSession)(),d=n.status,m=n.data,x=(0,i.cI)({defaultValues:{introduction:t.introduction||""}}),h=x.register,b=x.handleSubmit,g=(0,o.useState)(!1),v=g[0],y=g[1],j=(0,o.useRef)(null),w=h("introduction"),O=w.ref,S=f(w,["ref"]),N=(0,o.useCallback)((function(){var e;j.current&&(j.current.style.height="auto",j.current.style.height=(null===(e=j.current)||void 0===e?void 0:e.scrollHeight)+4+"px")}),[]),C=(0,o.useCallback)((function(e){s.Z.userService.apiUpdateUser(p({userIdx:t.idx},e)).then((function(e){var t=e.data.message;l.Am.success(t),N(),y(!1)})).catch((function(e){return console.error(e)}))}),[t,N]);return(0,o.useEffect)((function(){return N}),[N]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{avatar:t.photo,name:t.name,introduction:t.introduction}),(0,r.jsxs)("form",{className:"md:mx-auto md:w-3/5 mt-8 flex flex-col space-y-4",onSubmit:b(C),children:["authenticated"===d&&m.user.idx===t.idx&&(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsx)(u.Z,{type:"submit",contents:"\uc800\uc7a5\ud558\uae30",className:"self-end px-4 py-2 rounded-md font-semibold text-white bg-indigo-400 hover:bg-indigo-500"}),!v&&(0,r.jsx)(u.Z,{type:"button",contents:"\uc218\uc815\ud558\uae30",className:"self-end px-4 py-2 rounded-md font-semibold text-white bg-indigo-400 hover:bg-indigo-500",onClick:function(){y((function(e){return!e})),setTimeout((function(){var e;return null===(e=j.current)||void 0===e?void 0:e.focus()}),0)}})]}),(0,r.jsx)("textarea",p({disabled:!v},S,{className:"resize-none p-4 rounded-md",ref:function(e){O(e),j.current=e},onInput:N}))]})]})}}},function(e){e.O(0,[669,536,774,888,179],(function(){return t=8156,e(e.s=t);var t}));var t=e.O();_N_E=t}]);